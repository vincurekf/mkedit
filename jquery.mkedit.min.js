!function(e){"use strict";e.fn.mkedit=function(c,i){var a=e.extend({parsevalue:function(e){return e},onsave:function(){},oncancel:function(){},onkeypress:function(c,i,a){13===a&&e(".save[mke-id="+i+"]").click()},savebutton:'<img style="width: 1em;" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaGVpZ2h0PSIzMiIgaWQ9ImNoZWNrIiB2aWV3Qm94PSIwIDAgMzIgMzIiIHdpZHRoPSIzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMSAxNCBMNSAxMCBMMTMgMTggTDI3IDQgTDMxIDggTDEzIDI2IHoiLz48L3N2Zz4="/>',saveclass:"save",cancelbutton:'<img style="width: 1em;" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMzIgMzIiIGhlaWdodD0iMzJweCIgaWQ9InN2ZzIiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDMyIDMyIiB3aWR0aD0iMzJweCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgaWQ9ImJhY2tncm91bmQiPjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iMzIiIHdpZHRoPSIzMiIvPjwvZz48ZyBpZD0iY2FuY2VsIj48cG9seWdvbiBwb2ludHM9IjIsMjYgNiwzMCAxNiwyMCAyNiwzMCAzMCwyNiAyMCwxNiAzMCw2IDI2LDIgMTYsMTIgNiwyIDIsNiAxMiwxNiAgIi8+PC9nPjwvc3ZnPg=="/>',cancelclass:"cancel",eprevent:!0},i);return"attach"===c?(this.each(function(){var c=e(this),i=c.attr("mke-id");c.click(function(){if(c.attr("contentEditable",!0),c.focus(),!c.hasClass("active")){c.addClass("active");var t=c.text();c.after('<i class="'+a.saveclass+'" mke-id="'+i+'">'+a.savebutton+"</i>"),c.after('<i class="'+a.cancelclass+'" mke-id="'+i+'">'+a.cancelbutton+"</i>"),e(".save[mke-id="+i+"]").click(function(){c.text()!==t&&a.onsave(c,i,a.parsevalue(c.text()),t),e("."+a.saveclass+"[mke-id="+i+"]").remove(),e("."+a.cancelclass+"[mke-id="+i+"]").remove(),c.attr("contentEditable",!1),c.removeClass("active"),c.html(a.parsevalue(c.text()))}),e("."+a.cancelclass+"[mke-id="+i+"]").click(function(){a.oncancel(c,i,t),e("."+a.saveclass+"[mke-id="+i+"]").remove(),e("."+a.cancelclass+"[mke-id="+i+"]").remove(),c.attr("contentEditable",!1),c.removeClass("active"),c.html(t)})}})}),this):void("listen"===c&&this.each(function(){var c=e(this),i=c.attr("mke-id");c.keypress(function(e){a.onkeypress(c,i,e.which,e),a.eprevent&&e.stopPropagation()})}))}}(jQuery);